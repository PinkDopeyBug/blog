---
title: 7、总线
createTime: 2025/06/18 20:43:36
permalink: /base/co/7/
---
**按数据传输格式分**
- 串行总线
优点：只需要一条传输线，成本低廉，广泛应用于长距离传输；应用于计算机内部时，可以节省布线空间。
缺点：在数据发送和接收的时候要进行拆卸和装配，要考虑串行-并行转换的问题
- 并行总线
优点：总线的逻辑时序比较简单电路实现起来比较容易
缺点：信号线数量多，占用更多的布线空间；远距离传输成本高昂；由于工作频率较高时，并行的信号线之间会产生严重干扰，对每条线等长的要求也越高，所以无法持续提升工作频率。

**按连接部件分**
数据通路表示的是数据流经的路径
数据总线是承载的媒介

- 片内总线
片内总线是芯片内部的总线。它是CPU芯片内部寄存器与寄存器之间、寄存器与ALU之间的公共连接线。
- 系统总线
系统总线是计算机系统内各功能部件（CPU、主存、I/O接口）之间相互连接的总线。按系统总线传输信息内容的不同，又可分为3类：数据总线、地址总线和控制总线。
数据总线用来传输各功能部件之间的数据信息，它是双向传输总线，其位数与机器字长、存储字长有关。
地址总线用来指出数据总线上的源数据或目的数据所在的主存单元或I/O端口的地址，它是单向传输总线，地址总线的位数与主存地址空间的大小有关。
控制总线传输的是控制信息，包括CPU送出的控制命令和主存（或外设）返回CPU的反馈信号。
- 通信总线
通信总线是用于计算机系统之间或计算机系统与其他系统（如远程通信设备、测试设备）之间信息传送的总线，通信总线也称为外部总线。

**系统总线按功能分**
- 地址总线
- 数据总线
- 控制总线

## 系统总线的结构
### 单总线结构
![](attachments/Pasted%20image%2020250711221919.png)
结构：CPU、主存、IO设备（通过I/O接口）都连接在一组总线上，允许I/O设备之间、IO设备和CPU之间或I/O设备与主存之间直接交换信息。
优点：结构简单，成本低，易于接入新的设备。
缺点：带宽低、负载重，多个部件只能争用唯一的总线，且不支持并发传送操作。

### 双总线结构
![](attachments/Pasted%20image%2020250711221930.png)
结构：双总线结构有两条总线，一条是主存总线，用于CPU、主存和通道之间进行数据传送；另一条是VO总线，用于多个外部设备与通道之间进行数据传送。
优点：将较低速的I/O设备从单总线上分离出来，实现存储器总线和I/O总线分离。
缺点：需要增加通道等硬件设备。

### 三总线结构
![](attachments/Pasted%20image%2020250711221944.png)
结构：三总线结构是在计算机系统各部件之间采用3条各自独立的总线来构成信息通路，这3条总线分别为主存总线、IVO总线和直接内存访问DMA总线。
优点：提高了I/O设备的性能，使其更快地响应命令，提高系统吞吐量。
缺点：系统工作效率较低

### 四总线结构
![](attachments/Pasted%20image%2020250711221952.png)
1. 桥接器：用于连接不同的总线，具有数据缓冲、转换和控制功能。
2. 靠近CPU的总线速度较快
3. 每级总线的设计遵循总线标准

# 总线的性能指标
1. 总线的传输周期(总线周期)一次总线操作所需的时间（包括申请阶段、寻址阶段、传输阶段和结束阶段），通常袖若干个总线时钟周期构成。
2. 总线时钟周期即机器的时钟周期。计算机有一个统一的时钟，以控制整个计算机的各个部件，总线也要受此时钟的控制
3. 总线的工作频率总线上各种操作的频率，为总线周期的倒数若总线周期=N个时钟周期，则总线的工作频率=时钟频率/N。实际上指一秒内传送几次数据。
4. 总线的时钟频率即机器的时钟频率，为时钟周期的倒数。若时钟周期为T，则时钟频率为1/T。实际上指一秒内有多少个时钟周期
5. 总线宽度又称为总线位宽，它是总线上同时能够传输的数据位数，通常是指数据总线的根数，如32根称为32位（bit）总线。
6. 总线带宽可理解为总线的数据传输率，即单位时间内总线上可传输数据的位数，通常用每秒钟传送信息的字节数来衡量，单位可用字节/秒（B/s）表示。

总线带宽=总线工作频率×总线宽度（bit/s）=总线工作频率×(总线宽度/8）（B/s)
=总线宽度/总线周期 (bit/s)=总线宽度/8/总线周期 (B/s)

7. 总线复用总线复用是指一种信号线在不同的时间传输不同的信息可以使用较少的线传输更多的信息，从而节省了空间和成本
8. 信号线数地址总线、数据总线和控制总线3种总线数的总和称为信号线数。

1. 工作频率相同时，串行总线传输速度比并行总线慢
2. 并行总线的工作频率无法持续提高而串行总线可以通过不断提高工作频率来提高传输速度，最终超过并行总线

## 总线仲裁
将总线上所连接的各类设备按其对总线有无控制功能分为：
主设备：获得总线控制权的设备。
从设备：被主设备访问的设备，只能响应从主设备发来的各种总线命令。

总线作为一种共享设备，不可避免地会出现同一时刻有多个主设备竞争总线控制权的问题。

多个主设备同时竞争主线控制权时，以某种方式选择一个主设备优先获得总线控制权称为总线仲裁
总线仲裁分类：
集中仲裁方式：链式询方式、计数器定时查询方式、独立请求方式
分布仲裁方式

### 集中仲裁
工作流程:
1. 主设备发出请求信号；
2. 若多个主设备同时要使用总线，则由总线控制器的判优、仲裁逻辑按一定的优先等级顺序确定哪个主设备能使用总线;
3. 获得总线使用权的主设备开始传送数据。
#### 链式查询方式
优先级：离总线控制器越近的部件，其优先级越高，离总线控制器越远的部件，其优先级越低。

优点：链式查询方式优先级固定。只需很少几根控制线就能按一定优先次序实现总线控制，结构简单，扩充容易。
缺点：对硬件电路的故障敏感，并且优先级不能改变当优先级高的部件频繁请求使用总线时，会使优先级较低的部件长期不能使用总线。

#### 计数器查询方式
计数器存储当前询问是否使用总线的设备编号
优点：计数初始值可以改变优先次序
- 计数每次从“0"开始，设备的优先级就按顺序排列，固定不变;
- 计数从上一次的终点开始，此时设备使用总线的优先级相等；
- 计数器的初值还可以由程序设置对电路的故障没有链式敏感

缺点：增加了控制线数
- 若设备有n个，则需[log_2n]+2条控制线
- 控制相对比链式查询相对复杂

#### 独立请求方式
总线控制部件内部有一个排队器，需要使用总线的设备发送请求数据存入排队器内然后根据排队器分配
优点：
- 响应速度快，总线允许信号BG直接从控制器发送到有关设备不必在设备间传递或者查询
- 对优先次序的控制相当灵活

缺点：
1. 控制线数量多-若设备有n个，则需要2n+1条控制线其中+1为BS线，用于设备向总线控制部件反馈已经是否正在使用总线
2. 总线的控制逻辑更加复杂

### 分布仲裁
不需要中央仲裁器，每个潜在的主模块都有自己的仲裁器和仲裁号，多个仲裁器竞争使用总线。
当设备有总线请求时，它们就把各旨唯一的仲裁号发送到共享的仲裁总线上;每个仲裁器将从仲裁总线上得到的中裁号与自己的仲裁号进行比较;如果仲裁总线上的号优先级高，则它的总线请求不予响应，并撤销它的仲裁号；最后，获胜者的仲裁号保留在仲裁总线上。